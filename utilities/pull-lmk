#!/bin/bash
rsync -rtv mtio:/opt/minebest/ ~/minebest-rsync \
    --exclude "mtkit/minetest/" \
    --exclude "mtkit0/" \
    --exclude "git-trees.save/" \
    --exclude "tmp/" \
;
code=$?
# ^ exclude remotely-built copies of the program:
#   - mtkit/minetest/
#   - prod/ ?
# ^ The real git-trees is in assemble/ so do not exclude
#     --exclude "assemble/" \
#     --info=progress2 \
#
if [ $code -eq 0 ]; then
    echo "Updating ~/minebest-rsync...OK"
else
    echo "Updating ~/minebest-rsync...FAILED"
fi
cd ~/minebest-rsync
cat <<END

Next do:

cd ~/minebest-rsync/mtkit
bash -e mtcompile-libraries.sh build
perl mtcompile-program.pl --build --finetest --client
cd ~/minebest-rsync/mtkit/minetest/bin
nopackage install finetest --version rsync --caption "Finetest (rsync)"
END
